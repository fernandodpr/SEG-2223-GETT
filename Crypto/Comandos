Crea un nuevo key y prepara el CSR PARA EL CA
openssl req -new -config root-ca2.conf -out root-ca.csr \

Firmar el CSR del CA y añadirlo a la DB
openssl ca -selfsign -config root-ca.conf -in root-ca.csr -out root-ca.crt -extensions ca_ext



Ahora voy a crear un sub CA
Es necesario editar la configuración del sub-ca

Nuevo CSR para firmar con el CA
openssl req -new     -config sub-ca.conf     -out servidor-sub-ca.csr     -keyout private/servidor-sub-ca.key

En el Root CA firmamos la req


openssl ca -config root-ca.conf -in ../sub-ca/sub-ca.csr -out ../sub-ca/sub-ca.crt -extensions sub_ca_ext -days 365



Step 12: OpenSSL Create Certificate Chain (Certificate Bundle)
To openssl create certificate chain (certificate bundle), concatenate the intermediate and root certificates together.

In the below example I have combined my Root and Intermediate CA certificates to openssl create certificate chain in Linux. We will use this file later to verify certificates signed by the intermediate CA.

Crear Nuevos certificados
openssl req -new -out Cliente-Encrypt.csr     -keyout Cliente-Encrypt.key
Firmarlos en el sub_ca
openssl ca -config sub-ca.conf -in server.csr -out server.crt -extensions server_ext